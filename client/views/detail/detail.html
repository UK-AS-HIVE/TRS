<template name="detail">
  <div class="row">
    <div class="span4">
      <h1>{{department}}</h1>
      <h2>{{semester}}</h2>
    </div>
    <div class="span8">
      <div class="inline-edit" id="comments-{{_id}}">
        Comments:
        <span class="inline-edit-preview">{{{data.comments}}}</span>
        <span class="inline-edit-form">
          <br/>
          <textarea id="comments-textarea" placeholder="Comments">{{{data.comments}}}</textarea>
        </span>
        <i class="icon-edit"></i>
      </div>
      <div class="inline-edit" id="approved-funding-{{_id}}">
        Approved funding:
        <span class="inline-edit-preview">{{data.funding}}</span>
        <span class="inline-edit-form">
          <input id="approved-funding-input" type="text" value="{{data.funding}}" placeholder="Approved funding" />
        </span>
        <i class="icon-edit"></i>
      </div>
    </div>
  </div>

  <table class="table table-bordered">
    <thead>
      <th>Person</th>
      <th>Courses</th>
    </thead>
    <tbody>
      {{#each persons}}
        <tr>
          <td class="instructor-details deletable">
            <i class="icon-trash pull-right"></i>
            <h4><span class="editable" data-id="{{_id}}" data-property="name">{{name}}</span>
              <i class="icon-edit"></i>
            </h4>
            {{> detailRankSelect }}
            <div class="instructor-properties pull-right">
              <input type="text" placeholder="UK Id#" data-property="ukid" value="{{ukid}}" /><br/>
              <input type="text" placeholder="Notes" data-property="notes" value="{{notes}}" /><br/>
              <input type="text" placeholder="Instructional Faculty Buyout" data-property="buyout" value="{{buyout}}" /><br/>
              <input type="text" placeholder="Pay Amount" data-property="pay_amount" value="{{pay_amount}}" /><br/>
              <input type="text" placeholder="Date PAR Submitted" data-property="par" value="{{par}}" /><br/>
            </div>
          </td>
          <td>
            <button name="add-course" class="add-course btn btn-small pull-right">
              Add course
            </button>
            <ul>
              {{#each key_value courses}}
                <li id="course-{{../_id}}-{{key}}" data-index="{{key}}" data-id="{{../_id}}" class="course deletable inline-edit">
                  <span class="inline-edit-preview">
                    {{value.prefix}}-{{value.number}} ({{value.credits}} credits)
                  </span>
                  <span class="inline-edit-form" data-index="{{key}}" data-id="{{../_id}}">
                    <input type="text" placeholder="Prefix" maxlength="4" value="{{value.prefix}}" name="prefix" /><br/>
                    <input type="text" placeholder="Course number" maxlength="4" value="{{value.number}}" name="number" /><br/>
                    <input type="number" placeholder="Credit hours" min="0" max="4" maxlength="1" value="{{value.credits}}" name="credits" /><br/>
                  </span>
                  <i class="icon-edit"></i>
                  <i class="icon-trash"></i>
                </li>
              {{/each}}
            </ul>
          </td>          
        </tr>
      {{/each}}
      <tr>
        <td colspan="2">
          <button class="btn btn-primary pull-right" id="add">Add...</button>
        </td>
      </tr>
    </tbody>
  </table>
</template>

<template name="detailRankSelect">
  <select class="rank" style="min-width: 35%">
    <optgroup label="Faculty">
      <option {{selectedOption 'Full'}}>Full Professor</option>
      <option {{selectedOption 'Professor'}}>Professor</option>
      <option {{selectedOption 'Assoc'}}>Associate Professor</option>
      <option {{selectedOption 'Assist'}}>Assistant Professor</option>
    </optgroup>
    <option {{selectedOption 'Lecturer'}}>Lecturer</option>
    <option {{selectedOption 'PostDoc'}}>Post Doc</option>
    <option {{selectedOption 'PTI'}}>PTI</option>
    <option {{selectedOption 'GradStudent'}}>Grad Student</option>
  </select>
</template>
